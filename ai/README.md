# 🤖 سیستم RAG هوشمند دانشگاه شریف

سیستم هوشمند پاسخ‌دهی به سوالات دانشجویان دانشگاه صنعتی شریف بر اساس اطلاعات کانال‌های تلگرام دانشگاه.

## ✨ ویژگی‌ها

- **جستجوی معنایی پیشرفته**: استفاده از SentenceTransformer برای یافتن محتوای مرتبط
- **اولویت‌بندی کانال‌ها**: ابتدا کانال‌های مهم (روزنامه شریف و شورای صنفی) بررسی می‌شوند
- **لینک‌های مستقیم**: نمایش لینک مستقیم به پیام‌های استفاده شده
- **Agent هوشمند**: استفاده از LangChain Agent برای تصمیم‌گیری هوشمند
- **پاسخ‌دهی جامع**: ارائه پاسخ‌های کامل و مفصل با منابع

## 🚀 نصب و راه‌اندازی

### 1. نصب وابستگی‌ها
```bash
pip install -r requirements.txt
```

### 2. تنظیم متغیرهای محیطی
```bash
cp .env.example .env
# فایل .env را ویرایش کنید و API Key های مورد نیاز را اضافه کنید
```

### 3. آماده‌سازی داده‌ها
```bash
# فایل‌های export تلگرام را در پوشه data قرار دهید
# یا از اسکریپت‌های موجود استفاده کنید
```

## 📖 استفاده

### اجرای مستقیم
```bash
python3 langchain_rag_system.py --query "سوال شما"
```

### مثال‌ها
```bash
# سوال در مورد شورای صنفی
python3 langchain_rag_system.py --query "شورای صنفی دانشگاه چه کاری انجام می‌دهد؟"

# سوال در مورد مشکلات خوابگاه
python3 langchain_rag_system.py --query "مشکلات خوابگاه‌های دانشگاه چیست؟"
```

## 🔧 اسکریپت‌های مفید

### راه‌اندازی کامل سیستم
```bash
./scripts/export_and_update.sh full-setup
```

### تست سیستم
```bash
./scripts/test_export.sh
```

### بررسی وضعیت
```bash
./scripts/export_and_update.sh status
```

### به‌روزرسانی دستی
```bash
./scripts/export_and_update.sh update
```

## 📁 ساختار پروژه

```
bot/
├── langchain_rag_system.py      # سیستم اصلی RAG
├── telegram_export_parser.py    # پردازش فایل‌های export تلگرام
├── test_channels_database.json  # دیتابیس محلی
├── multi_channel_config.json    # تنظیمات کانال‌ها
├── requirements.txt             # وابستگی‌های Python
├── data/                        # فایل‌های export تلگرام
├── scripts/                     # اسکریپت‌های مدیریتی
└── README.md                    # این فایل
```

## 🎯 ویژگی‌های کلیدی

### جستجوی هوشمند
- ابتدا کانال‌های اولویت‌دار بررسی می‌شوند
- جستجوی معنایی در پیام‌ها
- گسترش خودکار جستجو در صورت نیاز

### پاسخ‌دهی بهینه
- پاسخ‌های جامع و مفصل
- لینک‌های مستقیم به منابع
- لحن مثبت و امیدوارکننده

### مدیریت داده‌ها
- به‌روزرسانی خودکار شبانه
- پشتیبان‌گیری خودکار
- مدیریت خطاها

## 🔍 نحوه کار

1. **دریافت سوال**: سیستم سوال کاربر را دریافت می‌کند
2. **جستجوی کانال‌ها**: کانال‌های مرتبط را پیدا می‌کند
3. **جستجوی پیام‌ها**: در هر کانال پیام‌های مرتبط را می‌یابد
4. **تولید پاسخ**: با استفاده از LLM پاسخ جامع تولید می‌کند
5. **نمایش منابع**: لینک‌های مستقیم به پیام‌های استفاده شده را نمایش می‌دهد

## 📞 پشتیبانی

برای گزارش مشکلات یا پیشنهادات، لطفاً issue جدید ایجاد کنید.
